//language settings
const englishText = {
  programs: "Training programs",
  team: "Our team",
  consultation: "Personal consultation",
  gallery_nav: "Gallery",
  feedback_nav: "Feedback",
  contacts: "Contacts",
  from: "Daily from",
  to: "to",
  callback: "Call back",
  h1_01: "Our Sport Club the way",
  h1_02: "to crush",
  h1_03: "your fitness goals",
  utp: "it is an investment in health and beauty, a guarantee of good mood and pass to the world of people who love fitness, appreciate professionalism and high quality services. Click to claim your personal fitness program with professional instructor",
  choose_program: "Choose a program",
  pro_01_01: "Hall area",
  pro_01_02: "ceilings",
  pro_02: "personal",
  pro_02_02: "insrtuctors",
  pro_03_01: "photo",
  pro_03_02: "shoots",
  pro_04_01: "simulators for",
  pro_04_02: "all muscle groups",
  pro_05_01: "Free",
  pro_05_02: "parking",
  pro_05_03: "for club members",
  pro_06_01: "functional",
  pro_06_02: "training",
  programs_h3_01: "choose a Fitness program",
  programs_h3_02: "and speed up the result by 2 times",
  programs_notes: "It’s over with senseless and inefficient trainings. Now you have a clear measurable and achievable goal!",
  program_title_01: "Program 100",
  program_title_01_01: "Perfect body for 100 workouts",
  program_title_02: "Hips and glutes workout",
  program_title_03: "Recovery after injury",
  program_title_04: "Postpartum Recovery",
  program_title_05: "Beautiful abs",
  price_list: "Get price list",
  team_h3_01: "Meet",
  team_h3_02: "our instructors team",
  instructor_name_01: "Maxim Mironov",
  instructor_title_01_01: "Top instructor, Champion of Belarus",
  instructor_title_01_02: "in bodybuilding 2017",
  instructor_name_02: "Natalia Oskolova",
  instructor_title_02_01: "Instructor, Champion of Belarus",
  instructor_title_02_02: "in powerlifting",
  instructor_name_03: "Vitaliy Krepishko",
  instructor_title_03_01: "Fitness Instructor",
  instructor_title_03_02: "",
  consultation_h3_01_01: "Personal instructor",
  consultation_h3_01_02: "consultation",
  text_info_01: "Our personal instructors, highly qualified specialists who studied to the smallest detail the features of human anatomy and physiology, as well as psychology, medicine and dietetics. Due to this, they are able to develop a training process scheme (adequately selected load and fitness diet), with the achievement of intermediate goals, individually for each person, taking into considaration all its features.",
  text_info_02: "We are ready to help you get comfortable in this difficult proces.",
  text_info_03: "Do not experiment on yourself and your health - work with  professionals!",
  consultation_h3_02_01: "Who will benefit",
  consultation_h3_02_02: "from personal",
  consultation_h3_02_03: "consultation and training",
  notes_01: "Take your workout to the next level!",
  li_01: "You are new and do not know where to start",
  li_02: "Adolescents who only need a sparing program that strengthens the spine",
  li_03: "Elderly people who need a program that takes into account possible diseases and various contraindications",
  li_04: "Men who seek to gain maximum muscle mass",
  li_05: "Women dreaming of a thin waist, rounded glutes and flat abbs",
  li_06: "You worked hard for a long time on your own, but did not achieve the desired result",
  li_07: "Men and women who want to lose weight and tone their muscles",
  li_08: "You need a new program or to adjust your existing program of exercises or nutrition",
  li_09: "Everyone who needs wellness rehabilitation after injuries or surgeries.",
  consultation_h3_03_01: "Personal instructor",
  consultation_h3_03_02: "services",
  duration: "Duration:",
  up_to_30: "up to 30 minutes",
  up_to_60: "up to 60 minutes",
  price: "Price of consultation:",
  free: "Free",
  consultation_tarif_title01: "Basic consultation",
  consultation_tarif_description_01: "Basic consultation is carried out after providing the completed questionnaire. At the consultation, the instructor will provide a professional assessment and give recommendations on how to achieve this goal.",
  consultation_tarif_title02: "Personal consultation",
  consultation_tarif_description_02: "Personal consultation is carried out after providing the completed questionnaire and includes a detailed analysis of training schemes, diet and taking sports supplements, an analysis of the training diary is conducted, on the basis of which the instructor will provide recommendations if necessary",
  consultation_tarif_title03: "Wellness rehabilitation",
  consultation_tarif_description_03: "Consultation is carried out after submitting the completed application form. This area involves counseling or an individual lesson with the instructor, on the prevention of diseases and the restoration of the spine, joints, various muscles of the body, rehabilitation after injuries and operations.",
  questionnaire: "Download a questionnaire",
  sign_up_01: "Sign up",
  consultation_h3_04_02: "for a personal",
  consultation_h3_04_03: "consultation with instructor",
  notes_02: "We provide a free consultation with a trainer",
  notes_03: "only for new members",
  download_input: "Download the application form",
  type_consult: "Choose the type of consultation",
  sign_up: "Sign up",
  terms_01: "By clicking the button, you agree to the terms",
  terms_02: "offer agreement",
  terms_03: "and",
  terms_04: "privacy policy",
  fitness_club: "Fitness Club",
  gallery_foto: "gallery",
  first_trail_02: "for the first",
  first_trail_03: "trail training",
  first_trail_note: "Take advantage of complimentary monthly fitness evaluations that include measurements, body fat percentage, body mass index, measure of flexibility, cardiovascular fitness test and goal setting.",
  available_title: "For your comfort use are available:",
  water: "Water",
  dryer: "Hair dryer",
  shower: "Shower",
  conditioners: "Air conditioners",
  feedback_01: "Our member’s",
  feedback_02: "feedback",
  testim_name: "Maria",
  our: "Our",
  addres_01: `Metro "Lenin Square"`,
  addres_02: "Yakub Kolas str., 56A",
  timing_01: "Mn-Fr 07:00 — 22:00",
  timing_02: "Sat-Sun 08:00 — 20:00",
  follow: "Follow us",
  rules: "Club rules",
  agreement: "Public Offer Agreement",
  policy: "Privacy policy",
  thanks_h3_01: "Thank you",
  thanks_h3_02: "for your interest!",
  thanks_text_01: "Your request for a callback has been accepted. Our manager will contact you",
  thanks_text_02: "within 15 minutes.",
  darkmode:"Dark mode",
  form_confirmed: "Welcome to",
  form_confirmed_text_01: "your request has been accepted. Our manager will contact you",
};
const rusText = {
  programs: "Программы",
  team: "Наша команда",
  consultation: "Консультации",
  gallery: "Галлерея",
  feedback_nav: "Отзывы",
  contacts: "Контакты",
  from: "ПН - ВС с",
  to: "до",
  callback: "Перезвоните",
  h1_01: "Наш Фитнес-клуб это путь",
  h1_02: "к достижению",
  h1_03: "фитнес целей",
  utp: "это вложение в здоровье и красоту, залог хорошего настроения и пропуск в мир людей, любящих фитнес, ценящих профессионализм и высокое качество услуг. Нажмите, чтобы получить персональную фитнес-программу с профессиональным инструктором",
  choose_program: "Выбрать программу",
  pro_01_01: "Площадь зала",
  pro_01_02: "потолки",
  pro_02: "персональных",
  pro_02_02: "тренеров",
  pro_03_01: "Бесплатные",
  pro_03_02: "фотосессии",
  pro_03_03: "в зале",
  pro_04_01: "тренажера",
  pro_04_02: "для всех групп мышц",
  pro_05_01: "Бесплатная",
  pro_05_02: "парковка",
  pro_05_03: "для машины",
  pro_06_01: "функциональный",
  pro_06_02: "тренинг",
  programs_h3_01: "выберите программу тренировок",
  programs_h3_02: "и ускорьте результат в 2 раза",
  programs_notes: "С бессмысленными походами в зал покончено. Теперь у вас есть понятная, измеримая и достижимая цель!",
  program_title_01: "Программа 100",
  program_title_01_01: "Идеальное тело за 100 тренировок",
  program_title_02: "Качаем бедра и ягодицы",
  program_title_03: "Восстановление после травм",
  program_title_04: "Восстановление после родов",
  program_title_05: "Красивый плоский живот",
  price_list: "Хочу узнать цены",
  team_h3_01: "Познакомьтесь с",
  team_h3_02: "командой тренеров",
  instructor_name_01: "Максим Миронов",
  instructor_title_01_01: "Мастер-тренер, Чемпион РБ",
  instructor_title_01_02: "по бодибилдингу 2017",
  instructor_name_02: "Наталья Осколова",
  instructor_title_02_01: "Тренер, Чемпионка РБ",
  instructor_title_02_02: "по пауэрлифтингу",
  instructor_name_03: "Виталий Крепышко",
  instructor_title_03_01: "Тренер",
  instructor_title_03_02: "",
  consultation_h3_01_01: "Индивидуальная",
  consultation_h3_01_02: "консультация с тренером",
  text_info_01: "Наши персональные тренеры, высоко квалифицированные специалисты, которые изучили до мельчайших подробностей особенности анатомии и физиологии человека, а также психологии, медицины и диетологии. Благодаря чему, способены разрабатывать схему тренировочного процесса (адекватно подобранная нагрузка и фитнес диета), с достижением промежуточных целей, индивидуально под каждого человека учитывая все его особенности.",
  text_info_02: "Мы готовы помочь вам освоиться в этом не простом процессе!",
  text_info_03: "Не экспериментируйте на себе и своем здоровье — обращайтесь к профессионалам!",
  consultation_h3_02_01: "Кому будут полезны",
  consultation_h3_02_02: "персональные",
  consultation_h3_02_03: "консультации и тренировки",
  notes_01: "Выведите свою тренировку на новый уровень!",
  li_01: "Вы новичок и не знаете с чего Вам начать",
  li_02: "Подросткам, которым подойдет только щадящая программа, укрепляющая позвоночник",
  li_03: "Пожилым люди, которым подойдет программа, учитывающая возможные заболевания и разного рода противопоказания",
  li_04: "Мужчинам, которые стремятся набрать максимальную мышечную массу",
  li_05: "Женщинам, мечтающим о тонкой талии, округлых ягодицах и плоском животике",
  li_06: "Вы долго и упорно занимались самостоятельно, но не достигли желаемого результата",
  li_07: "Мужчинам и женщинам, которые хотят сбросить лишний вес и привести свои мышцы в тонус",
  li_08: "Вам необходима новая или корректировка программы нагрузок (тренировок) или питания",
  li_09: "Всем, кому необходима оздоровительная реабилитация после травм или операций.",
  consultation_h3_03_01: "Bиды консультаций",
  consultation_h3_03_02: "с тренером ",
  duration: "Продолжительность:",
  up_to_30: "до 30 минут",
  up_to_60: "до 60 минут",
  price: "Стоимость:",
  free: "Бесплатно",
  consultation_tarif_title01: "Базовая консультация",
  consultation_tarif_description_01: "Базовая консультация проводиться после предоставления заполненной анкеты. На консультации, тренер  предоставит профессиональную оценку и даст рекомендации по способам достижения поставленной цели. ",
  consultation_tarif_title02: "Персональная консультация",
  consultation_tarif_description_02: "Персональная консультация проводиться после предоставления заполненной анкеты и включает детальный разбор тренировочных схем, рациона питания и приема спортивных добавок, проведене анализ дневника тренировок, на основании которого тренер по необходимости предоставит рекомендации",
  consultation_tarif_title03: "Реабилитация",
  consultation_tarif_description_03: "Консультация проводиться после предоставления заполненной анкеты. Данное направление предполагает консультирование или индивидуальное занятие с тренером, по профилактике заболеваний и восстановлению позвоночника, суставов, различных мышц тела, реабилитации после травм и операций.",
  questionnaire: "Скачать анкету",
  sign_up_01: "Запишитесь",
  consultation_h3_04_02: "на персональную",
  consultation_h3_04_03: "консультацию с тренером",
  notes_02: "Мы предоставляем бесплатную консультацию с тренером",
  notes_03: "только для новых клиентов",
  download_input: "Загрузите заполненную анкету",
  type_consult: "Выберите тип консультации",
  sign_up: "Хочу записаться!",
  terms_01: "Нажимая кнопку, вы соглащаетесь с",
  terms_02: "условиями договора оферты",
  terms_03: "и",
  terms_04: "политикой конфиденциальности",
  fitness_club: "Как выглядит зал,",
  gallery_foto: "где проходят тренировки",
  first_trail_02: "на первую",
  first_trail_03: "пробную тренировку",
  first_trail_note: "Воспользуйтесь бесплатной ежемесячной оценкой физической формы, которые включают измерения процентного содержания жира в организме, индекс массы тела, показатель гибкости, сердечно-сосудистый фитнес-тест и постановку целей.",
  available_title: "Для вашего пользования бесплатно:",
  water: "Вода",
  dryer: "Фен",
  shower: "Душ",
  conditioners: "Кондиционеры",
  feedback_01: "Что",
  feedback_02: "о нас говорят",
  our: "Наши",
  addres_01: `Метро "Площадь Ленина"`,
  addres_02: "Ул. Якуба Коласа, 56A",
  timing_01: "Пн-Пт 07:00 — 22:00",
  timing_02: "Сб-Вс 08:00 — 20:00",
  follow: "Мы в соц сетях",
  rules: "Правила клуба",
  agreement: "Договор публичной оферты",
  policy: "Политика конфеденциальности",
  thanks_h3_01: "Мы благодарим",
  thanks_h3_02: "за ваш интерес!",
  thanks_text_01: "Ваш запрос обратного звонка принят. Наш менеджер свяжется с вами",
  thanks_text_02: "в течение 15 минут.",
  darkmode: "Темная тема",
  form_confirmed: "Приветствуем в",
  form_confirmed_text_01: "Ваш запрос принят. Наш менеджер свяжется с вами",
};

const englishButton = document.querySelector(".en");
const russianButton = document.querySelector(".ru");

let languageStatus = {
  english: "on",
}
function setInitialLanguage(){
  localStorage.setItem("englishStatus", JSON.stringify(languageStatus));
}

//on btn_click event
englishButton.addEventListener("click", function(){
  setEnglish();
  setInitialReview();
  setInitialSlider();
})
russianButton.addEventListener("click", function(){
  setRusLang();
  setInitialReview();
  setInitialSlider();
})

function setRusLang(){
  languageStatus["english"] = "off";
  getNode(rusText);
  chengePlaceholder("Ваше имя", "Ваш номер телефона");
  addStyles();
  chengeCheckboxPosition(`.language .control`, "auto", "0");
}
function setEnglish(){
  languageStatus["english"] = "on";
  getNode(englishText);
  chengePlaceholder("You name", "Your phone number");
  removeStyles();
  chengeCheckboxPosition(`.language .control`, "0", "auto")
}
function getNode(langArr) {
  localStorage.setItem("englishStatus", JSON.stringify(languageStatus));
  document.querySelectorAll("*").forEach(function (node) {
    if (node.dataset.language) {
      let obj = node.dataset;
      for (let keyData in obj) {
        changeLanguage(node, obj[keyData],"ru", langArr);
      }
    }
  });
}
function changeLanguage(node, data, langAttr, langArr) {
  for (let keyLanguage in langArr) {
    if (data == keyLanguage) {
      node.innerText = langArr[keyLanguage];
      node.setAttribute("lang", langAttr);
    }
  }
}
function chengePlaceholder(text1, text2){
  document.querySelectorAll(".input_name").forEach( e => {
    e.placeholder = text1;
  });
  document.querySelectorAll(".input_phone").forEach( e => {
    e.placeholder = text2;
  })
}
function addStyles(){
  document.querySelector("h1").classList.add("language_style");
  document.querySelectorAll("#programs h3").forEach(e => {
    e.classList.add("language_style");
  })
  document.querySelector("#team h3").classList.add("language_style");
  document.querySelector(".consultation_part_01 .image_wrapper").classList.add("language_style");
  document.querySelector(".consultation_part_01 h3").classList.add("language_style");
  document.querySelector(".consultation_part_03 h3").classList.add("language_style");
  document.querySelector("#gallery h3").classList.add("language_style");
  document.querySelector("#contacts h3").classList.add("language_style");
}
function removeStyles(){
  document.querySelector("h1").classList.remove("language_style");
  document.querySelectorAll("#programs h3").forEach(e => {
    e.classList.remove("language_style");
  })
  document.querySelector("#team h3").classList.remove("language_style");
  document.querySelector(".consultation_part_01 .image_wrapper").classList.remove("language_style");
  document.querySelector(".consultation_part_03 h3").classList.remove("language_style");
  document.querySelector("#gallery h3").classList.remove("language_style");
  document.querySelector("#contacts h3").classList.remove("language_style");
}
function chengeCheckboxPosition(selector, left, right){
  document.querySelector(selector).style.left = left;
  document.querySelector(selector).style.right = right;
}




;
// burger
document.querySelector(".burger").onclick = () => {
  togglemenu();
};
document.querySelector(".nav_menu").onclick = () => {
  togglemenu();
};
document.querySelector(".callback-wrapper").onclick = () => {
  togglemenu();
};

function togglemenu() {
  document.querySelector(".burger").classList.toggle("opened");
  document.querySelector(".nav_menu").classList.toggle("opened");
  document.querySelector(".callback-wrapper").classList.toggle("opened");
  document.querySelector("body").classList.toggle("opened");
};
//change mode
const checkBoxMode = document.querySelector(".dark_mode .box");
const lightMode = "light";
const darkMode = "dark";
const body = document.querySelector("body");
let IndexCount = 1;
let headerWrapper = ".header_img_wrapper";
let headerImgName = "fitness_girl";
let consultImgWrapper01 = ".consultation_part_01";
let consultImgName = "personal_consult";
let consultImgWrapper04 = ".consultation_part_04";
let consult04ImgName = "sign_up_consult";
let firstTrailImgWrapper04 = ".first_trail_img_wrapper";
let firstTrailImgName = "signup_image";

let programImgContainerArr = document.querySelectorAll('.program_container');
let teamImgContainerArr = document.querySelectorAll('.instructor');
let consultationImgContainerArr = document.querySelectorAll('.consultation_tarif');
let landingMode = { darkMode: "on",}

function setInitialMode(){
  localStorage.setItem("landingMode", JSON.stringify(landingMode));
}

checkBoxMode.addEventListener("click", changeMode);

function changeMode(){
  checkBoxMode.classList.toggle("off");
  changeLayout();
}
function changeLayout(){
  document.querySelector("body").classList.toggle(lightMode);
  if(body.classList.contains(lightMode)){
    setLightMode();
  }else{
    setDarkMode();
  }
}

//helper function
function chengeAttributes(selector01, selector02, selector03, attr01, attr02, attr03){
  document.querySelector(selector01).style.src = attr01;
  document.querySelector(selector02).setAttribute("srcset", attr02);
  document.querySelector(selector03).setAttribute("srcset", attr03);
}
function getDiv(arr, section, mode){
  arr.forEach( e => {
    chengeAttributes(`.${section}${IndexCount} img`, `.${section}${IndexCount} .source_01`, `.${section}${IndexCount} .source_02`, `img/${mode}/${section}${IndexCount}.png`, `img/${mode}/${section}${IndexCount}.webp`, `img/${mode}/${section}${IndexCount}.png`);
    IndexCount++;
  })
  IndexCount = 1;
}

function setDarkMode(){
  landingMode["darkMode"] = "on";
  localStorage.setItem("landingMode", JSON.stringify(landingMode));

  //header
  chengeAttributes(`${headerWrapper} img`, `${headerWrapper} .source_01`, `${headerWrapper} .source_02`,`img/${darkMode}/${headerImgName}.png`, `img/${darkMode}/${headerImgName}.webp`, `img/${darkMode}/${headerImgName}.png`);

  //program&team
  getDiv(programImgContainerArr, "program_0", darkMode);
  getDiv(teamImgContainerArr, "instructor_0", darkMode);

  //consiltation
  chengeAttributes(`${consultImgWrapper01} img`, `${consultImgWrapper01} .source_01`, `${consultImgWrapper01} .source_02`,`img/${darkMode}/${consultImgName}.png`, `img/${darkMode}/${consultImgName}.webp`, `img/${darkMode}/${consultImgName}.png`);

  getDiv(consultationImgContainerArr, "cosultation_0", darkMode);

  chengeAttributes(".consult_img_signup", `${consultImgWrapper04} .source_01`, `${consultImgWrapper04} .source_02`,`img/${darkMode}/${consult04ImgName}.png`, `img/${darkMode}/${consult04ImgName}.webp`, `img/${darkMode}/${consult04ImgName}.png`);

  //firsttrail
  chengeAttributes(`${firstTrailImgWrapper04} img`, `${firstTrailImgWrapper04} .source_01`, `${firstTrailImgWrapper04} .source_02`,`img/${darkMode}/${firstTrailImgName}.png`, `img/${darkMode}/${firstTrailImgName}.webp`, `img/${darkMode}/${firstTrailImgName}.png`);

  //feedback
  chengeAttributes(`.feedback_img`, `#feedback .source_01`, `#feedback .source_02`,`img/${darkMode}/girl_03.png`, `img/${darkMode}/girl_03.webp`, `img/${darkMode}/girl_03.png`);
}
function setLightMode(){
  landingMode["darkMode"] = "off";
  localStorage.setItem("landingMode", JSON.stringify(landingMode));

  //header
  chengeAttributes(`${headerWrapper} img`, `${headerWrapper} .source_01`, `${headerWrapper} .source_02`,`img/${lightMode}/${headerImgName}.png`, `img/${lightMode}/${headerImgName}.webp`, `img/${lightMode}/${headerImgName}.png`);

  //program&team
  getDiv(programImgContainerArr, "program_0", lightMode);
  getDiv(teamImgContainerArr, "instructor_0", lightMode);

  //consiltation
  chengeAttributes(`${consultImgWrapper01} img`, `${consultImgWrapper01} .source_01`, `${consultImgWrapper01} .source_02`,`img/${lightMode}/${consultImgName}.png`, `img/${lightMode}/${consultImgName}.webp`, `img/${lightMode}/${consultImgName}.png`);

  getDiv(consultationImgContainerArr, "cosultation_0", lightMode);

  chengeAttributes(".consult_img_signup", `${consultImgWrapper04} .source_01`, `${consultImgWrapper04} .source_02`,`img/${lightMode}/${consult04ImgName}.png`, `img/${lightMode}/${consult04ImgName}.webp`, `img/${lightMode}/${consult04ImgName}.png`);

  //firsttrail
  chengeAttributes(`${firstTrailImgWrapper04} img`, `${firstTrailImgWrapper04} .source_01`, `${firstTrailImgWrapper04} .source_02`,`img/${lightMode}/${firstTrailImgName}.png`, `img/${lightMode}/${firstTrailImgName}.webp`, `img/${lightMode}/${firstTrailImgName}.png`);

  //feedback
  chengeAttributes(`.feedback_img`, `#feedback .source_01`, `#feedback .source_02`,`img/${lightMode}/girl_03.png`, `img/${lightMode}/girl_03.webp`, `img/${lightMode}/girl_03.png`);
};
//form validation
const inputArr = document.querySelectorAll("input");
const formCallback = document.getElementById("callback_form");
const formConsultation = document.getElementById("personal_consultation");
const formFirsttrail = document.getElementById("first_trail");

formCallback.addEventListener("submit", e => {
  e.preventDefault();
  formSend(formCallback, ".callback_popup_wrapper");
})
formConsultation.addEventListener("submit", e => {
  e.preventDefault();
  formSend(formConsultation, ".consultation_part_04 .form_wrapper");
})
formFirsttrail.addEventListener("submit", e => {
  e.preventDefault();
  formSend(formFirsttrail, ".first_trail_section .form_wrapper");
})

async function formSend(form, parrentNode){
  let error = formValidate(form, parrentNode);

  if (error == 0){
    form.classList.add("_sending");
    inputArr.forEach(e =>{
      e.value = "";
    })
    if(form == formConsultation || form == formFirsttrail){
      document.querySelector(".form_confirmed_popup_wrapper").style.display = "block";
    }
    if(form == formCallback){
      document.querySelector(".callback_popup_wrapper").style.display = "none";
      document.querySelector(".thank_popup_wrapper").style.display = "block";
    }
  } else{
    alert("Please fill out all required fields!");
  }
}
function formValidate(form, parrentNode){
  let error = 0;
  let formReq = document.querySelectorAll(`${parrentNode} ._req`);

  for(let i = 0; i < formReq.length; i++){
    const input = formReq[i];
    formRemoveError(input);

    if(input.value === ""){
      formAddError(input);
      error++;
    }
  }
  return error;
}
function formAddError(input){
  input.parentElement.classList.add("_error");
  input.classList.add("_error");
}
function formRemoveError(input){
  input.parentElement.classList.remove("_error");
  input.classList.remove("_error");
}

// select
const select = document.querySelector(".select");
const select_text = document.querySelector(".select_text");
const options_wrapper = document.querySelector(".options_wrapper");
const options_wrapperArr = document.querySelectorAll(".options_wrapper li");

let optionsObj = {
  option_basic: "Basic consultation",
  option_personal: "Personal consultation",
  rehabilitation: "Wellness rehabilitation",
}
// open/close select 
document.addEventListener("click", e => {
  let targetID = e.target;
  //open|close select if click on select
  if(targetID.parentElement.closest(".select") || targetID.classList.contains("select")){
    options_wrapper.classList.toggle("opened");
    select.classList.toggle("opened");
  }
  //close select if click not on input
  if(select.classList.contains("opened") && !targetID.parentElement.closest(".select_wrapper")){
    closeSelect();
  }
})

//set selected options
options_wrapper.addEventListener("click", e => {
  let targetIDTag = e.target.tagName;
  if(targetIDTag == 'LI' || e.target.parentElement.closest("LI")){
    if( e.target.classList.contains("option_basic") || e.target.parentElement.closest(".option_basic")){
      setSelectedOption("option_basic");
    }
    if( e.target.classList.contains("option_personal") || e.target.parentElement.closest(".option_personal")){
      setSelectedOption("option_personal");
    }
    if( e.target.classList.contains("rehabilitation") || e.target.parentElement.closest(".rehabilitation")){
      setSelectedOption("rehabilitation");
    }
  }
})

//helper function
function closeSelect(){
  select.classList.remove("opened");
  options_wrapper.classList.remove("opened");
}
function setSelectedOption(key){
  select_text.textContent = optionsObj[key];
  closeSelect();
}
;
//feedback section
const feedback_text = document.querySelector(".feedback_text");
const testim_name = document.querySelector(".testim_name");
const testim_date = document.querySelector(".testim_date");
const testim_img = document.querySelector(".img_testimon img");
const activeSliderNum = document.querySelector("#feedback .slider_wrapper ._active");
const sliderControlBtm = document.querySelector("#feedback .slider_wrapper .control_right");
const sliderControlTop = document.querySelector("#feedback .slider_wrapper .control_left");
 
let currentSliderNum = 1;
let sliderIndex = 1;

const feedbackEn = {
  fb_01: {
    text: "I was trained by instructor Natalya Oskolkova on an individual program, in addition, a low-calorie nutrition program was developed for me. For 2 months I lost 16kg. I am very grateful to Natalia for her support, motivation and help. The gym is very modern, here you can find everything you need for effective training.",
    name: "Maria",
    date: "12.12.2019",
    img: "img/dark/testimonial_01.png",
  },
  fb_02: {
    text: `I would like to thank the chain of fitness clubs "Fitness Zone88" for the professional and individual approach to the training process. This is very professoinsl team! Thanks to the comprehensive approach of the instructors, in a month I easily managed to lose -6.4 kg. I am very pleased with the result! I continue with my work out and improve my health!`,
    name: "Alex",
    date: "23.01.2020",
    img: "img/dark/testimonial_02.png",
  },
  fb_03: {
    text: `Hello! What beliefs and results appeared after a month of working with personal trainer Maxim Mironov in the "Program 100": Losing weight without dieting is possible! It is easier than expected to acquire healthy habits by adapting your food-drinking regime to a dynamic life. Regular communication with the coach is excellent discipline and helps to cope with temptations. Weight loss occurs regularly and gradually - every day at least 200-300 grams. For a month - 8.5 kg + good health. I advise everyone!`,
    name: "Larysa",
    date: "05.03.2020",
    img: "img/dark/testimonial_03.png",
  },
  fb_04: {
    text: `They say "No pain, no gain." Well, there was much pain. But let's face it - it was definitely worth it. Just 30 trainings in the gym with a highly professional and energetic coach Vitaliy Krepishko helped me to achieve a goal I didn't even have courage to dream of. I lost 17 kg, improved significantly my health, became stronger and got my confidence back. More to come!`,
    name: "Ksenia",
    date: "18.03.2020",
    img: "img/dark/testimonial_04.png",
  },
  fb_05: {
    text: `Thanks to my coach Natalia Oskolkova! My result is minus 43 kilograms! Changing life, changing eating habits, changing wardrobe to size S (and some things also XS) were fantastic even when they were! I recommend "Fitness Zone88" to everyone.`,
    name: "Viktoria",
    date: "25.05.2020",
    img: "img/dark/testimonial_05.png",
  },
}
const feedbackRu = {
  fb_01: {
    text: "Я занималась с тренером Натальей Осколковой по индивидуальной программе, кроме того для меня разработали низкокалорийную программу питания. За 2 месяца я сбросила 16кг. Очень благодарна Наталье за ее  поддержку, мотивацию и  помощь. Тренажерный зал очень современный, здесь можно найти все, что необходимо для эффективных тренировок.",
    name: "Мария",
    date: "12.12.2019",
    img: "img/dark/testimonial_01.png",
  },
  fb_02: {
    text: "Хочу поблагодарить сеть фитнес клубов «Fitness Zone88» за профессиональный и индивидуальный подход к ведению тренировочного процесса. Это команда, которая знает свое дело! Благодаря комплексному подходу ребят, за месяц мне с легкостью удалось сбросить -6,4 кг. Очень доволен результатом!!! Продолжаю заниматься и улучшать свое здоровье!",
    name: "Алекс",
    date: "23.01.2020",
    img: "img/dark/testimonial_02.png",
  },
  fb_03: {
    text: `Всем привет! Какие убеждения и результаты появились после месяца работы с личным тренером Максимом Мироновым в программе «Программа 100»:
    Похудеть без диеты – это возможно! Приобрести здоровые привычки, адаптировав режим питья-еды к динамичной жизни – легче, чем ожидала. Регулярное  общение с тренером – отлично дисциплинирует и помогает справиться с соблазнами. Снижение веса происходит регулярно и постепенно – каждый день минуc 200-300 грамм. За месяц – 8,5кг + хорошее самочувствие. Советую всем!`,
    name: "Лариса",
    date: "05.03.2020",
    img: "img/dark/testimonial_03.png",
  },
  fb_04: {
    text: "Говорят: «Нет боли - нет пользы». Что ж, было очень больно. Но давайте посмотрим правде в глаза - оно того стоило. Всего 30 тренировок в зале с высокопрофессиональным и энергичным тренером Виталием Крепышко помогли мне достичь цели, о которой я даже мечтать не могла. Я похудела на 17 кг, значительно поправила здоровье, окрепла и вернула себе уверенность. Толи еще будет!",
    name: "Ксения",
    date: "18.03.2020",
    img: "img/dark/testimonial_04.png",
  },
  fb_05: {
    text: "Спасибо моему тренеру Наталье Осколковой! Мой результат- минус 43 килограмма! Изменение жизни, изменение пищевых привычек, изменение гардероба до размера S (а некоторые вещи и XS) еще когда были фантастикой! Всем рекомендую «Fitness Zone88»!",
    name: "Виктория",
    date: "25.05.2020",
    img: "img/dark/testimonial_05.png",
  },
}

let fbArrEng = Object.entries(feedbackEn);
let fbArrRu = Object.entries(feedbackRu);

function setInitialReview(){
  setReviewHelper(1, 0, 1)
  sliderIndex = 1;
  currentSliderNum = 1;
}

//chenge slider to bottom(right)
sliderControlBtm.addEventListener("click", e => {
  if(sliderIndex - 1 < 4){
    setReviewHelper(sliderIndex+1, sliderIndex, sliderIndex + 1)
    sliderIndex++;
  } else{
    initialIndex = 4;
    let actualLanguageStatus = JSON.parse(localStorage.getItem("englishStatus"));
    if(actualLanguageStatus["english"] == "on"){
      feedback_text.textContent = fbArrEng[4][1].text;
    } else{
      feedback_text.textContent = fbArrRu[4][1].text;
    }
  }
})

//chenge slider to top(left)
sliderControlTop.addEventListener("click", e => {
  if(sliderIndex >= 0){
    --sliderIndex;
    setReviewHelper(sliderIndex, sliderIndex-1, sliderIndex);
  }else{
    setInitialReview();
  }
})

// helper functions
function setReviewHelper(imgNum, index, currentSliderNum){
  if(imgNum == 0){
    imgNum = 1;
    index = 0;
    currentSliderNum = 1
    sliderIndex = 1;
  }
  //main review
  testim_img.src = `img/dark/testimonial_0${imgNum}.png`;
  testim_date.textContent = fbArrEng[index][1].date;
  activeSliderNum.textContent = currentSliderNum;

  //read all_popup
  let actualLanguageStatus = JSON.parse(localStorage.getItem("englishStatus"));
  if(actualLanguageStatus["english"] == "on"){
    feedback_text.textContent = fbArrEng[index][1].text;
    testim_name.textContent = fbArrEng[index][1].name;
  } else{
    feedback_text.textContent = fbArrRu[index][1].text;
    testim_name.textContent = fbArrRu[index][1].name;
  }

}
;
//team section slider
const instructorIMGArr = document.querySelectorAll("#team img");
const instructorSrcset01Arr = document.querySelectorAll("#team .source_01");
const instructorSrcset02Arr = document.querySelectorAll("#team .source_02");
const instructorNameArr = document.querySelectorAll("#team .instructor_name");
const instructorTitle_01Arr = document.querySelectorAll("#team .instructor_title_01");
const instructorTitle_02Arr = document.querySelectorAll("#team .instructor_title_02");
const teamSliderControlLeft = document.querySelector("#team .control_left");
const teamSliderControlRight = document.querySelector("#team .control_right");
const activeTeamSlider = document.querySelector("#team ._active");
let initTeamSliderIndex = 1;
let sliderActiveNum = 2;
let src = "";

const teamObjEng = {
  1: {
    name: "Maxim Mironov",
    title_01: "Top instructor, Champion of Belarus",
    title_02: "in bodybuilding 2017",
  },
  2: {
    name: "Natalia Oskolova",
    title_01: "Top instructor, Champion of Belarus",
    title_02: "in powerlifting",
  },
  3: {
    name: "Vitaliy Krepishko",
    title_01: "Fitness instructor",
    title_02: "",
  },
  4: {
    name: "Sergey Parchomov",
    title_01: "Fitness instructor",
    title_02: "",
  },
  5: {
    name: "Liliana Nosova",
    title_01: "Fitness & TRX",
    title_02: "Instructor",
  },
  6: {
    name: "Kiril Voronov",
    title_01: "Fitness instructor",
    title_02: "Dietolog",
  },
  7: {
    name: "Viktor Fomin",
    title_01: "Fitness instructor",
    title_02: "",
  },
  8: {
    name: "Veronica Lopatina",
    title_01: "TRX instructor",
    title_02: "",
  },
  9: {
    name: "Ilya Vinnik",
    title_01: "Fitness instructor",
    title_02: "Dietolog",
  },
}
const teamObjRu = {
  1: {
    name: "Максим Миронов",
    title_01: "Топ инструктор, Чемпион Беларуси",
    title_02: "по бодибилдингу 2017",
  },
  2: {
    name: "Наталья Осколкова",
    title_01: "Топ инструктор, Чемпион Беларуси",
    title_02: "по пауэрлифтингу",
  },
  3: {
    name: "Виталий Крепышко",
    title_01: "Фитнес Инструктор",
    title_02: "",
  },
  4: {
    name: "Сергей Пархомов",
    title_01: "Фитнес Инструктор",
    title_02: "",
  },
  5: {
    name: "Лилиана Носова",
    title_01: "Фитнес & TRX",
    title_02: "Инструктор",
  },
  6: {
    name: "Кирил Воронов",
    title_01: "Фитнес Инструктор",
    title_02: "Диетолог",
  },
  7: {
    name: "Виктор Фомин",
    title_01: "Фитнес Инструктор",
    title_02: "",
  },
  8: {
    name: "Вероника Лопатина",
    title_01: "TRX инструктор",
    title_02: "",
  },
  9: {
    name: "Илья Винник",
    title_01: "Фитнес Инструктор",
    title_02: "Диетолог",
  },
}

let teamArrEng = Object.entries(teamObjEng);
let teamArrRu = Object.entries(teamObjRu);

teamSliderControlRight.addEventListener("click", sliderToRight);
teamSliderControlLeft.addEventListener("click", sliderToLeft);

function setInitialSlider(){
  initTeamSliderIndex = 1;
  let srcFolder = getMode();
  setActiveNum();
  setInstrustorImg(initTeamSliderIndex, srcFolder);
  setInstrustorSrcset(initTeamSliderIndex, instructorSrcset01Arr, "webp", srcFolder);
  setInstrustorSrcset(initTeamSliderIndex, instructorSrcset02Arr, "png", srcFolder);
  setInstrustorName(initTeamSliderIndex);
  setInstrustorTitle_01(initTeamSliderIndex);
  setInstrustorTitle_02(initTeamSliderIndex);
}

function sliderToRight(){
  //slider move right
  initTeamSliderIndex += 3;
  if(initTeamSliderIndex >= 9){
    initTeamSliderIndex =  1;
  }

  let srcFolder = getMode();
  setActiveNum();
  setInstrustorImg(initTeamSliderIndex, srcFolder);
  setInstrustorSrcset(initTeamSliderIndex, instructorSrcset01Arr, "webp", srcFolder);
  setInstrustorSrcset(initTeamSliderIndex, instructorSrcset02Arr, "png", srcFolder);
  setInstrustorName(initTeamSliderIndex);
  setInstrustorTitle_01(initTeamSliderIndex);
  setInstrustorTitle_02(initTeamSliderIndex);
}

function sliderToLeft(){
  //slider move right
  if(initTeamSliderIndex == 1){
    initTeamSliderIndex = 7;
  } else if(initTeamSliderIndex == 7){
    initTeamSliderIndex = 4;
  } else if(initTeamSliderIndex == 4){
    initTeamSliderIndex = 1;
  }

  let srcFolder = getMode();
  setActiveNum();
  setInstrustorImg(initTeamSliderIndex , srcFolder);
  setInstrustorSrcset(initTeamSliderIndex, instructorSrcset01Arr, "webp", srcFolder);
  setInstrustorSrcset(initTeamSliderIndex, instructorSrcset02Arr, "png", srcFolder);
  setInstrustorName(initTeamSliderIndex);
  setInstrustorTitle_01(initTeamSliderIndex);
  setInstrustorTitle_02(initTeamSliderIndex);
}

// helper function 
function setActiveNum(){
  //active slider num
  if(initTeamSliderIndex == 1){
    activeTeamSlider.textContent = 1;
  } else if(initTeamSliderIndex == 4){
    activeTeamSlider.textContent = 2;
  } else if(initTeamSliderIndex == 7){
    activeTeamSlider.textContent = 3;
  }
}
function setInstrustorImg(index, folder){
  for(let i = 0; i < instructorIMGArr.length; i++){
    instructorIMGArr[i].src = `img/${folder}/instructor_0${index}.png`;
    index++;
  }
}
function setInstrustorSrcset(index, arr, extension, folder){
  for(let i = 0; i < arr.length; i++){
    arr[i].setAttribute("srcset", `img/${folder}/instructor_0${index}.${extension}`);
    index++;
  }
}
function setInstrustorName(index){
  let actualLanguageStatus = JSON.parse(localStorage.getItem("englishStatus"));
  if(actualLanguageStatus["english"] == "on"){
    for(let i = 0; i < instructorNameArr.length; i++){
      instructorNameArr[i].textContent = teamArrEng[index-1][1].name;
      index++;
    }
  } else{
    for(let i = 0; i < instructorNameArr.length; i++){
      instructorNameArr[i].textContent = teamArrRu[index-1][1].name;
      index++;
    }
  }

}
function setInstrustorTitle_01(index){
  let actualLanguageStatus = JSON.parse(localStorage.getItem("englishStatus"));
  if(actualLanguageStatus["english"] == "on"){
    for(let i = 0; i < instructorTitle_01Arr.length; i++){
      instructorTitle_01Arr[i].textContent = teamArrEng[index-1][1].title_01;
      index++;
    }
  } else{
    for(let i = 0; i < instructorTitle_01Arr.length; i++){
      instructorTitle_01Arr[i].textContent = teamArrRu[index-1][1].title_01;
      index++;
    }
  }

}
function setInstrustorTitle_02(index){
  let actualLanguageStatus = JSON.parse(localStorage.getItem("englishStatus"));
  if(actualLanguageStatus["english"] == "on"){
    for(let i = 0; i < instructorTitle_02Arr.length; i++){
      instructorTitle_02Arr[i].textContent = teamArrEng[index-1][1].title_02;
      index++;
    }
  } else{
    for(let i = 0; i < instructorTitle_02Arr.length; i++){
      instructorTitle_02Arr[i].textContent = teamArrRu[index-1][1].title_02;
      index++;
    }
  }
}
function getMode(){
  let actualModeStatus = JSON.parse(localStorage.getItem("landingMode"));
  if(actualModeStatus["darkMode"] == "on"){
    src = "dark";
  } else{
    src = "light";
  }
  return src;
}




;

//LP initialisation
document.addEventListener('DOMContentLoaded', function(){
  //check and initialise language of page
  let actualLanguageStatus = JSON.parse(localStorage.getItem("englishStatus"));
  if(actualLanguageStatus && actualLanguageStatus["english"] == "off"){
    setRusLang();
  } else{
    setInitialLanguage();
  }
  setInitialReview();
  setInitialMode();
})

//smooth scroll
document.addEventListener("click", function (event) {
  if (event.target.classList.contains("scroll")) {
    event.preventDefault();
    var target = event.target.getAttribute("href");
    var targetPosition = document.querySelector(target).offsetTop;
    window.scrollTo({
      top: targetPosition,
      left: 0,
      behavior: "smooth",
    });
  }
});

//POPUP
//callback 
document.querySelector(".callback_btn").addEventListener("click", e => {
  openPopup ("popup_callback");
});

document.getElementById("popup_callback").addEventListener("click", e => {
  let elemTarget = e.target;
  closePopup(elemTarget, "callback_popup_wrapper", "popup_callback");
});

//thanks close
document.getElementById("popup_thank").addEventListener("click", e => {
  let elemTarget = e.target;
  closePopup(elemTarget, "thank_popup_wrapper", "popup_thank");
});

//form_confirmed_popup close
document.getElementById("form_confirmed").addEventListener("click", e => {
  let elemTarget = e.target;
  closePopup(elemTarget, "form_confirmed_popup_wrapper", "form_confirmed");
});

// helper functions
//open
function openPopup(selector){
  document.getElementById(selector).style.display = "block";
  document.querySelector("body").style.overflowY="hidden";
}
//close
function closePopup(elemTarget, selector_01, selector_02){
  if(elemTarget.classList.contains(selector_01) || elemTarget.classList.contains("fas")){
    document.getElementById(selector_02).style.display = "none";
    document.querySelector("body").style.overflowY="auto";
  }
}

//cloud animation
const clouds = document.querySelector(".clouds");
document.querySelector(".header_img_wrapper").addEventListener("mouseover", moveclouds);
document.querySelector(".header_img_wrapper").addEventListener("mouseout", cloudsback);

function moveclouds(){
  let x = (clouds.getBoundingClientRect().left) + (clouds.clientWidth /2);
  let y = (clouds.getBoundingClientRect().left) + (clouds.clientHeight/2);
  let radian = Math.atan2(event.pageX - x, event.pageY - y);
  let rot = (radian * (180 / Math.PI) * -1) + 0;
  rot = rot/10;
  clouds.style.transform = `translate(${rot}px, ${rot}px)`;
}
function cloudsback(){
  clouds.style.transform = "translate(0px)";
}

//hide totop on header
const totop =  document.querySelector(".totop");
document.addEventListener("scroll", function(){
  if(pageYOffset <= 80){
    totop.style.opacity = "0";
  } else {
    totop.style.opacity = "0.7";
  }
});
